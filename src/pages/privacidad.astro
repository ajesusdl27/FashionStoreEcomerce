---
import PublicLayout from "@/layouts/PublicLayout.astro";
import { getContactInfo, getSetting } from "@/lib/settings";
import { Shield, Lock, Eye, Users, FileText } from "lucide-react";

// Obtener información desde la base de datos
const contactInfo = await getContactInfo();
const storeName = await getSetting('storeName');

const lastUpdate = new Date().toLocaleDateString("es-ES", {
  year: "numeric",
  month: "long",
  day: "numeric",
});
---

<PublicLayout
  title={`Política de Privacidad - ${storeName}`}
  description="Nuestra política de privacidad y protección de datos."
>
  <!-- Breadcrumb -->
  <div class="border-b border-border">
    <div class="container mx-auto px-4 py-3">
      <nav class="text-sm text-muted-foreground">
        <ol class="flex items-center gap-2">
          <li><a href="/" class="hover:text-primary transition-colors">Inicio</a></li>
          <li>/</li>
          <li class="text-foreground">Política de Privacidad</li>
        </ol>
      </nav>
    </div>
  </div>

  <div class="container mx-auto px-4 py-8 md:py-12 max-w-4xl">
    <div class="text-center mb-12">
      <div class="w-16 h-16 mx-auto mb-4 rounded-2xl bg-primary/10 flex items-center justify-center">
        <Shield className="w-8 h-8 text-primary" />
      </div>
      <h1 class="font-display text-4xl md:text-5xl mb-4">
        Política de Privacidad
      </h1>
      <p class="text-muted-foreground">Última actualización: {lastUpdate}</p>
    </div>

    <div class="admin-card space-y-8 text-muted-foreground leading-relaxed">
      <section>
        <h2 class="font-heading text-2xl text-foreground mb-4">
          1. Responsable del Tratamiento
        </h2>
        <p>
          En {storeName}, nos comprometemos a proteger y respetar tu
          privacidad. Esta política explica cómo recopilamos, usamos y
          protegemos tus datos personales cuando visitas nuestro sitio web o
          realizas una compra.
        </p>
        <p class="mt-4">
          <strong>Identidad:</strong> {storeName} S.L.<br />
          <strong>Domicilio:</strong> {contactInfo.address}<br />
          <strong>Email:</strong> {contactInfo.email}
        </p>
      </section>

      <section>
        <h2 class="font-heading text-2xl text-foreground mb-4">
          2. Datos que Recopilamos
        </h2>
        <p>Podemos recopilar y procesar los siguientes datos sobre ti:</p>
        <ul class="list-disc pl-5 mt-4 space-y-2">
          <li>Datos de identidad (nombre, apellidos).</li>
          <li>
            Datos de contacto (email, teléfono, dirección de envío y
            facturación).
          </li>
          <li>
            Datos financieros (detalles de pago, historial de transacciones). No
            almacenamos números de tarjeta de crédito completos.
          </li>
          <li>Datos técnicos (dirección IP, navegador, sistema operativo).</li>
          <li>
            Datos de perfil (usuario, contraseña, preferencias, feedback).
          </li>
        </ul>
      </section>

      <section>
        <h2 class="font-heading text-2xl text-foreground mb-4">
          3. Finalidad del Tratamiento
        </h2>
        <p>Usamos tus datos para:</p>
        <ul class="list-disc pl-5 mt-4 space-y-2">
          <li>Gestionar y enviar tus pedidos.</li>
          <li>Enviarte notificaciones sobre el estado de tu compra.</li>
          <li>Gestionar devoluciones o incidencias.</li>
          <li>
            Enviarte comunicaciones comerciales (solo si has dado tu
            consentimiento).
          </li>
          <li>Mejorar nuestro sitio web y prevenir fraudes.</li>
        </ul>
      </section>

      <section>
        <h2 class="font-heading text-2xl text-foreground mb-4">
          4. Destinatarios de los Datos
        </h2>
        <p>Tus datos podrán ser cedidos a:</p>
        <ul class="list-disc pl-5 mt-4 space-y-2">
          <li>
            Empresas de transporte y logística para la entrega de pedidos.
          </li>
          <li>
            Proveedores de servicios de pago para gestionar las transacciones.
          </li>
          <li>
            Proveedores de servicios tecnológicos (hosting, mantenimiento).
          </li>
          <li>Autoridades legales cuando sea requerido por ley.</li>
        </ul>
      </section>

      <section>
        <h2 class="font-heading text-2xl text-foreground mb-4">
          5. Tus Derechos
        </h2>
        <p>
          Tienes derecho a acceder, rectificar, suprimir y oponerte al
          tratamiento de tus datos, así como otros derechos detallados en el
          RGPD. Para ejercerlos, envíanos un email a
          {contactInfo.email}.
        </p>
      </section>

      <div class="border-t border-border pt-8 mt-8 text-center">
        <p class="text-sm mb-4">
          Si tienes alguna duda sobre esta política, no dudes en contactarnos.
        </p>
        <a href="/contacto" class="admin-btn-secondary inline-flex">
          Contactar
        </a>
      </div>
    </div>
  </div>
</PublicLayout>
