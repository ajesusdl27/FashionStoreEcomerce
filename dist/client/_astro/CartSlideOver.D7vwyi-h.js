import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as x}from"./index.WFquGv8Z.js";import{u as f}from"./index.Ctr3S7GU.js";import{u as p,r as j,$ as g,a as v}from"./cart.BgO2WpaW.js";function N({value:t,onChange:a,min:l=1,max:s=99}){const o=()=>{t>l&&a(t-1)},n=()=>{t<s&&a(t+1)};return e.jsxs("div",{className:"inline-flex items-center border border-border rounded-lg overflow-hidden",children:[e.jsx("button",{onClick:o,disabled:t<=l,className:"w-8 h-8 flex items-center justify-center text-muted-foreground hover:text-foreground hover:bg-muted transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Disminuir cantidad",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),e.jsx("span",{className:"w-10 text-center text-sm font-medium",children:t}),e.jsx("button",{onClick:n,disabled:t>=s,className:"w-8 h-8 flex items-center justify-center text-muted-foreground hover:text-foreground hover:bg-muted transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Aumentar cantidad",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})}function E({freeShippingThreshold:t=50,shippingCost:a=4.99}){const[l,s]=x.useState(!1),o=f(g),n=f(v),h=Math.min(n/t*100,100),d=n>=t,b=t-n;x.useEffect(()=>{const r=()=>s(m=>!m),c=document.getElementById("cart-toggle");c?.addEventListener("click",r);const u=m=>{m.key==="Escape"&&s(!1)};return document.addEventListener("keydown",u),()=>{c?.removeEventListener("click",r),document.removeEventListener("keydown",u)}},[]),x.useEffect(()=>(l?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[l]);const i=r=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(r);return l?e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:()=>s(!1)}),e.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-full max-w-md bg-card border-l border-border shadow-xl animate-slide-in-right flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[e.jsxs("h2",{className:"font-heading text-xl font-semibold",children:["Tu Carrito (",o.length,")"]}),e.jsx("button",{onClick:()=>s(!1),className:"touch-target flex items-center justify-center text-muted-foreground hover:text-foreground transition-colors","aria-label":"Cerrar carrito",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),!d&&o.length>0&&e.jsxs("div",{className:"px-6 py-3 bg-muted/50",children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Â¡AÃ±ade ",e.jsx("span",{className:"font-bold text-primary",children:i(b)})," mÃ¡s para envÃ­o GRATIS!"]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary transition-all duration-500 ease-out",style:{width:`${h}%`}})})]}),d&&o.length>0&&e.jsx("div",{className:"px-6 py-3 bg-emerald-500/10 border-b border-emerald-500/20",children:e.jsx("p",{className:"text-sm text-emerald-400 font-medium text-center",children:"ðŸŽ‰ Â¡EnvÃ­o GRATIS!"})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:o.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-muted-foreground mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Tu carrito estÃ¡ vacÃ­o"}),e.jsx("button",{onClick:()=>s(!1),className:"text-primary hover:underline",children:"Continuar comprando"})]}):e.jsx("ul",{className:"space-y-4",children:o.map(r=>e.jsxs("li",{className:"flex gap-4 pb-4 border-b border-border last:border-0",children:[e.jsx("a",{href:`/productos/${r.productSlug}`,className:"flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden bg-muted",children:e.jsx("img",{src:r.imageUrl,alt:r.productName,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("a",{href:`/productos/${r.productSlug}`,className:"font-medium text-sm hover:text-primary transition-colors line-clamp-1",children:r.productName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Talla: ",r.size]}),e.jsx("p",{className:"font-bold mt-1",children:i(r.price)})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx(N,{value:r.quantity,onChange:c=>p(r.id,c),min:1,max:10}),e.jsx("button",{onClick:()=>j(r.id),className:"text-xs text-muted-foreground hover:text-accent transition-colors",children:"Eliminar"})]})]},r.id))})}),o.length>0&&e.jsxs("div",{className:"border-t border-border px-6 py-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsx("span",{children:i(n)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"EnvÃ­o"}),e.jsx("span",{className:d?"text-emerald-400":"",children:d?"GRATIS":i(a)})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg pt-2 border-t border-border",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:i(n+(d?0:a))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("a",{href:"/checkout",className:"block w-full py-4 bg-primary text-primary-foreground text-center font-heading text-lg tracking-wider hover:shadow-[0_0_20px_rgba(204,255,0,0.4)] transition-all",children:"FINALIZAR COMPRA"}),e.jsx("button",{onClick:()=>s(!1),className:"block w-full py-3 text-center text-sm text-muted-foreground hover:text-foreground transition-colors",children:"Continuar comprando"})]})]})]})]}):null}export{E as default};
